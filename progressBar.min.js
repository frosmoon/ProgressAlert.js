class ProgressBar{static SUCCESS="success";static FAIL="fail";static NEUTRAL="neutral";constructor(s={}){const e=5,t="Processing",r="Please wait...",i="blue",o="lime",n="red",a="orange",h="darkblue",l=null,p=null,d="alert",c="center",u=!1,g="Cancel!",C=1300;this.steps=s.steps??e,this.title=s.title??t,this.message=s.message??r,this.progressColor=s.progressColor??i,this.progressColorSuccess=s.progressColorSuccess??o,this.progressColorError=s.progressColorError??n,this.progressColorNeutral=s.progressColorNeutral??a,this.progressBackgroundColor=s.progressBackgroundColor??h,this.onFinish=s.onFinish??l,this.onOpen=s.onOpen??p,this.type=s.type??d,this.allowOutsideClick="modal"!==this.type,this.position="toast"===this.type&&"top-left"!==s.position?s.position??c:c,this.showCancelButton=s.showCancelButton??u,this.cancelButtonText=s.cancelButtonText??g,this.progressBar=document.createElement("div"),this.closeTimeout=s.closeTimeout??C,this.progress=0,this.stepSize=100/this.steps,this.miniStepSize=this.stepSize/10,this.closed=!1,this.version="V3",this.status="created"}setProgress(s,e){if(s<0||s>101)return!1;this.progress=s,this.updateProgress(e)}updateProgress(s){const e=`${this.progress}%`;this.progressBar&&(this.progressBar.style.width=e,this.progressBar.style.backgroundColor=s),this.progress>=90&&(this.progressBar&&(this.progressBar.style.borderRadius="40px"),this.progressContainer&&(this.progressContainer.style.borderRadius="40px")),this.progress>=100?this.endProgress():this.updated("progress")}updateProgressWithSteps(s){if(!this.canContinue())return!1;const e=s===ProgressBar.SUCCESS?this.progressColorSuccess:s===ProgressBar.FAIL?this.progressColorError:s===ProgressBar.NEUTRAL?this.progressColorNeutral:this.progressColor;this.setProgress(this.progress+this.stepSize,e)}simulateProgress(){const s=setInterval((()=>{this.setProgress(this.progress+this.miniStepSize),this.progress>=100&&clearInterval(s)}),50)}demo(){let s=0;const e=setInterval((()=>{s++,this.updateProgressWithSteps("success"),this.updateMessage(`Progress: ${this.progress}%`),10===s&&clearInterval(e)}),1e3)}updateMessage(s){s&&(this.messageContainer.innerText=s,this.updated("message"))}updateSteps(s){if(!this.canContinue())return!1;this.steps=s,this.stepSize=100/this.steps,this.miniStepSize=this.stepSize/10,this.updated("steps")}showProgressBar(){if("created"!==this.status)return;const s="progress-dialog";if(!document.querySelector("#"+s)){const e=`\n        <div>\n            <p id="message">${this.message||"Please wait..."}</p>\n            <div class="progress">\n                <div class="progress-bar"></div>\n            </div>\n        </div>\n        `,t=document.createElement("div");t.id=s,t.innerHTML=e,document.body.appendChild(t)}if(!document.querySelector("#progress_style")){const s=document.createElement("style");s.id="progress_style",s.innerHTML=`\n             .progress-bar {\n                height: 30px;\n                width: 0%;\n                border-radius: 40px 10px 10px 40px;\n                transition: border-radius 0.5s;\n            }\n            .progress {\n                background-color: ${this.progressBackgroundColor||"cornflowerblue"};\n                border-radius: 40px;\n                transition: width 0.5s;\n            }`,document.head.appendChild(s)}if(this.progressBar=document.querySelector(".progress-bar"),this.progressContainer=document.querySelector(".progress"),this.messageContainer=document.querySelector("#message"),"undefined"==typeof Swal)throw new Error("SweetAlert2 (Swal) is not defined.");this.alertSwal=Swal.mixin({title:this.title,toast:"toast"===this.type,position:this.position,html:document.getElementById("progress-dialog"),showCancelButton:!!this.showCancelButton,showConfirmButton:!1,allowEscapeKey:!1,willClose:()=>{this.endProgress("user")},didOpen:()=>{this.onOpened()}}),"toast"!==this.type&&(this.alertSwal.allowOutsideClick=this.allowOutsideClick),this.showCancelButton&&(this.alertSwal.cancelButtonText=this.cancelButtonText,this.alertSwal.closeOnCancel=!0),this.alertSwal.fire()}reset(){this.closed=!1,this.progress=0,this.stepSize=100/this.steps,this.miniStepSize=this.stepSize/10,this.status="recreated",this.updated()}updated(s){this.isOpen()||this.showCancelButton||this.showProgressBar()}canContinue(){return!this.closed&&!this.isFinished()&&"closed"!==this.status}isFinished(){return this.progress>=100}isOpen(){return this.alertSwal?.isVisible?.()||!1}onOpened(){this.status="opened",this.updated("onOpen"),"function"==typeof this.onOpen&&this.onOpen()}isReallyClosed(s){return this.canContinue()&&!this.showCancelButton}endProgress(s){this.updated("endProgress"),setTimeout((()=>{this.alertSwal.close(),"function"==typeof this.onFinish&&this.onFinish(),this.closed=!0,this.status="closed"}),this.closeTimeout)}}const iniconfig=["margin-left:35%","background-color: blueviolet","padding: 10px","color: #ffffff","font-family: 'Courier New', Courier, monospace","font-weight: bold","font-size: larger","border-radius:8px"].join(" ;");console.log("%cProgress API V3",iniconfig);
